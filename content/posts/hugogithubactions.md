---
title: "Hugo deployment with GitHub actions"
date: 2022-08-27T12:34:50+02:00
draft: false
tags: ["github", "github actions", "hugo", "static website", "website" ]
categories: ["how to"]
cover:
    image: "https://arminebner.codes/hugo.svg.png"
    alt: "picture of the Hugo logo"
    caption: "<text>"
---

# Hugo on GitHub with Github actions

## TLDR;

If you are hosting your Hugo website on GitHub pages, you can easily deploy it via GitHub actions.
Go to the settings tab of the repo containing your Hugo site. Select the pages tab and then simply choose actions instead of branch under "Build and deployment" and choose the corresponding "Hugo" action. 
After commiting the action into your repository, it will build and deploy your site after every push to the main branch.


## Ok, tell me more

### What is Hugo?

Hugo is a static site generator. It will take all the code relevant for the site to work plus the content you create in markdown files and compiles it into a static website.
This means that your web server delivers only html pages to the client exactly as stored in the file system on the server. In contrast there are dynamic web pages, which are generated by a web application 

Key advantages are [¹]
- Improved security
- Imporoved performance ( both in regard to speed and SEO )
- Fewer dependencies ( i.e. databases )
- Cost savings

A disadvantage is that all dynamic functionality has to be performed client side, but 
Not long ago, you would have said that a static site is a good fit for you if the sites content doesn't change often and if you don'T have too many files to manage. 
But with the help of static site generators like Hugo, it is easy to update existing and also publish new content to your static site, because you don't have to do the 'heavy lifting'.

### Install Hugo and create a repository

If you are using a Linux distribution that supports snaps, you can simply:
```shell
$ snap install hugo --channel=extended
```

You could install Hugo via apt, but it is "not recommended", because these versions are "usually a few versions behind".[²]

Let's verify our installation
```shell
$ hugo version
```

With the Hugo cli installed, you simply can type
```bash
$ hugo new site <sitename>
```
to create a new site project

You can start the local Hugo server with 
```shell
$ hugo server -D
```

The site is locally available under localhost:1313 and has hot-reload so you can see any change you make to your site or content after every save.

After that, you initialize a git repository inside you websites' directory
```shell
$ git init
$ git branch -m main 
```

I recommend that you now install your desired theme as a git submodule (anake is just one of many themes for you to choose from).
```shell
$ git submodule add https://github.com/theNewDynamic/gohugo-theme-ananke.git themes/ananke
```

Now set the installed theme to be the used theme in your config.toml
```shell
$ echo theme = \"ananke\" >> config.toml
```

We have installed Hugo and our theme, now to 

### Add content
```shell
$ hugo new posts/my-first-post.md
```

The new-command created a .md file, which you can edit with any type of texteditor. By default, the file contains Frontmatter, with the following initial information

```markdown
---
title: "My First Post"
date: 2019-03-26T08:47:11+01:00
draft: true
---
```

So add whatever you want to the file and make sure to set draft to false, because content files in draft will not get deployed.

For now, let's get ready to push our local site to our remote GitHub repository.
```shell
$ git add .
$ git commit -m "intial setup"
```

### Deployment

The comfort and power of Hugo hosted on GitHub pages will become evident very soon.

First we have to create a Repository on GitHub
After having done that, we add this repository as a remote for our local Website repo
```shell
$ git remote add origin git@github.com:username/reponame.git
$ git push -u origin main
```

If you added a license or a readme to your remote repo, you might have to pull first and then you get merge conflicts. You can simply resolve them by typing
```shell
$ git pull origin main --rebase
```

After we successfully pushed our site to GitHub, we then only have to go to the settings tab of our repo and select the "Pages" section.
Under "Build and deployment" choose "GitHub Actions" and pick the predefined "Hugo" action.

**PERSONAL EXPERIENCE:** ***I am using a theme called PaperMod.[³] In the installation instructions they use .yaml instead of .toml as the configuration filetype. Having used the .yaml format, GitHub would not show me the option to choose the Hugo GitHub action. As soon as I had switched to .toml it showed up.***

After you committed the .yaml file for the action to your repository, it starts the first run of the workflow to build and deploy your site ( because you essentially just pushed to your main
branch ).
This is exactly what we wanted to happen! Every time you push to main now, the GitHub action runs and builds and deploys your site to GitHub pages.

### Custom Domain

You can easily add a custom domain to your page hosted on GitHub.  In the same Pages tab enter your domain name ( <name.toplevel> ) and hit "Save".
Keep in mind that you will have to update your dns settings over at your domain provider.
Over there you'll have to setup four A Records and one CNAME Record.[4]

### Ressources

- [¹]:  see [static web page on Wikipedia](https://en.wikipedia.org/wiki/Static_web_page)
- [²]:  see [Hugo installation guide](https://gohugo.io/getting-started/installing/)
- [³]:  see [PaperMod](https://github.com/adityatelange/hugo-PaperMod) theme on GitHub
- [⁴]:  see this [reference](https://www.namecheap.com/support/knowledgebase/article.aspx/9645/2208/how-do-i-link-my-domain-to-github-pages/) from Namecheap

### Helpful videos about this topic

- [Using GitHub Pages with Actions to deploy Hugo sites in seconds - Tommy Byrd // HugoConf 2022](https://www.youtube.com/watch?v=Z_7RIuf_Z-Q) 
-  [Building Websites With Hugo](https://youtu.be/927wgzzNMEA)
-  [Getting Started With Hugo | FREE COURSE](https://youtu.be/hjD9jTi_DQ4) 